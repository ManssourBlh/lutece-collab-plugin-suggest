--
-- Table structure for table digglike_digg_attribute		
--
DROP TABLE IF EXISTS digglike_digg_attribute CASCADE;
CREATE TABLE digglike_digg_attribute (
	id_digg INT DEFAULT 0 NOT NULL,
	attribute_key varchar(255) NOT NULL,
	attribute_value varchar(255) NOT NULL,
	PRIMARY KEY (id_digg, attribute_key)
);


--
-- Add column disable_vote,is_pinned
--

ALTER TABLE digglike_digg_submit ADD COLUMN disable_vote int default 0;
ALTER TABLE digglike_digg_submit ADD COLUMN is_pinned int default 0;
ALTER TABLE digglike_digg_submit ADD COLUMN disable_comment smallint default 0;


--
-- Table structure for table digglike_reported_message		
--
DROP TABLE IF EXISTS digglike_reported_message CASCADE;
CREATE TABLE digglike_reported_message (
	id_reported_message int default 0 NOT NULL,
	id_digg_submit int default NULL,
	date_reported timestamp NULL,
	reported_value long varchar,
	PRIMARY KEY (id_reported_message)
	);

 
CREATE INDEX index_digglike_reported_message ON digglike_reported_message (id_digg_submit);
ALTER TABLE digglike_reported_message ADD CONSTRAINT fk_digglike_reported_message FOREIGN KEY (id_digg_submit)
	REFERENCES digglike_digg_submit (id_digg_submit);
	
	
	
	
--
-- Table structure for table digglike_digg_digg_submit_type
--
DROP TABLE IF EXISTS digglike_digg_digg_submit_type CASCADE;
CREATE TABLE digglike_digg_digg_submit_type (
	id_digg int default 0 NOT NULL,
	id_type int default 0 NOT NULL,
	PRIMARY KEY (id_digg,id_type)
);



ALTER TABLE digglike_digg_digg_submit_type ADD CONSTRAINT fk_digglike_digg_digg_submit_type FOREIGN KEY (id_digg)
	REFERENCES digglike_digg (id_digg);

ALTER TABLE digglike_digg_digg_submit_type ADD CONSTRAINT fk_digglike_digg_submit_type FOREIGN KEY (id_type)
	REFERENCES digglike_digg_submit_type (id_type);

--
-- Drop Column  active_digg_submit_type
--	
ALTER TABLE  digglike_digg  DROP COLUMN active_digg_submit_type; 

--
-- Dumping data for table digglike_export_format
--
TRUNCATE digglike_export_format;

INSERT INTO `digglike_export_format` (`id_export`, `title`, `description`, `extension`, `xsl_file`) VALUES (1, 'xml', 'Exporter les propositions au format xml', 'xml', 0x3C3F786D6C2076657273696F6E3D22312E302220656E636F64696E673D2249534F2D383835392D31223F3E0D0A3C78736C3A7374796C6573686565742076657273696F6E3D22312E302220786D6C6E733A78736C3D22687474703A2F2F7777772E77332E6F72672F313939392F58534C2F5472616E73666F726D223E0D0A3C78736C3A6F7574707574206D6574686F643D22786D6C222076657273696F6E3D22312E302220656E636F64696E673D2249534F2D383835392D312220696E64656E743D22796573222063646174612D73656374696F6E2D656C656D656E74733D22646967672D7375626D69742D76616C756520646967672D7375626D69742D63617465676F7279222F3E0D0A3C78736C3A74656D706C617465206D617463683D222F223E0D0A203C78736C3A6170706C792D74656D706C617465732073656C6563743D2264696767222F3E200D0A3C2F78736C3A74656D706C6174653E0D0A0D0A3C78736C3A74656D706C617465206D617463683D2264696767223E0D0A090D0A093C646967673E0D0A09093C646967672D7469746C653E0D0A0909093C78736C3A76616C75652D6F662073656C6563743D22646967672D7469746C65222F3E0D0A09093C2F646967672D7469746C653E0D0A09093C7375626D6974733E0D0A0909093C78736C3A6170706C792D74656D706C617465732073656C6563743D2264696767732D7375626D69742F646967672D7375626D6974222F3E200D0A09093C2F7375626D6974733E0D0A093C2F646967673E090D0A3C2F78736C3A74656D706C6174653E0D0A0D0A3C78736C3A74656D706C617465206D617463683D22646967672D7375626D6974223E0D0A093C646967672D7375626D69743E0D0A09093C646967672D7375626D69742D646174652D726573706F6E73653E0D0A0909093C78736C3A76616C75652D6F662073656C6563743D22646967672D7375626D69742D646174652D726573706F6E7365222F3E0D0A09093C2F646967672D7375626D69742D646174652D726573706F6E73653E0D0A09090D0A09093C646967672D7375626D69742D73636F72653E0D0A0909093C78736C3A76616C75652D6F662073656C6563743D22646967672D7375626D69742D73636F7265222F3E0D0A093C2F646967672D7375626D69742D73636F72653E0D0A09090D0A09093C646967672D7375626D69742D6E756D6265722D766F74653E0D0A0909093C78736C3A76616C75652D6F662073656C6563743D22646967672D7375626D69742D6E756D6265722D766F7465222F3E0D0A093C2F646967672D7375626D69742D6E756D6265722D766F74653E0D0A09090D0A09093C646967672D7375626D69742D6E756D6265722D636F6D6D656E743E0D0A0909093C78736C3A76616C75652D6F662073656C6563743D22646967672D7375626D69742D6E756D6265722D636F6D6D656E74222F3E0D0A09093C2F646967672D7375626D69742D6E756D6265722D636F6D6D656E743E0D0A09090D0A093C646967672D7375626D69742D76616C75653E0D0A0909093C78736C3A76616C75652D6F662073656C6563743D22646967672D7375626D69742D76616C7565222F3E0D0A09093C2F646967672D7375626D69742D76616C75653E0D0A09093C646967672D7375626D69742D63617465676F72793E0D0A0909093C78736C3A76616C75652D6F662073656C6563743D22646967672D7375626D69742D63617465676F7279222F3E0D0A09093C2F646967672D7375626D69742D63617465676F72793E0D0A09093C646967672D7375626D69742D747970653E0D0A0909093C78736C3A76616C75652D6F662073656C6563743D22646967672D7375626D69742D74797065222F3E0D0A09093C2F646967672D7375626D69742D747970653E0D0A093C2F646967672D7375626D69743E0D0A3C2F78736C3A74656D706C6174653E0D0A3C2F78736C3A7374796C6573686565743E);
INSERT INTO `digglike_export_format` (`id_export`, `title`, `description`, `extension`, `xsl_file`) VALUES (2, 'csv propositions', 'Exporter les propositions au format csv', 'csv', 0x3C3F786D6C2076657273696F6E3D22312E302220656E636F64696E673D225554462D38223F3E0D0A3C78736C3A7374796C6573686565742076657273696F6E3D22312E302220786D6C6E733A78736C3D22687474703A2F2F7777772E77332E6F72672F313939392F58534C2F5472616E73666F726D223E0D0A093C78736C3A6F7574707574206D6574686F643D2274657874222F3E0D0A093C78736C3A74656D706C617465206D617463683D222F64696767223E0D0A09093C78736C3A746578743E2270726F706F736974696F6E223B22646174652070726F706F736974696F6E223B2273636F7265223B226E6F6D62726520646520766F7465223B226E6F6D62726520646520636F6D6D656E7461697265223B22547970652064652070726F706F736974696F6E223B2263617426233233333B676F726965223C2F78736C3A746578743E0D0A09093C78736C3A746578743E262331303B3C2F78736C3A746578743E0D0A09093C78736C3A6170706C792D74656D706C617465732073656C6563743D2264696767732D7375626D69742F646967672D7375626D6974222F3E0D0A093C2F78736C3A74656D706C6174653E0D0A093C78736C3A74656D706C617465206D617463683D222F646967672F64696767732D7375626D69742F646967672D7375626D6974223E0D0A090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D22646967672D7375626D69742D76616C7565222F3E3C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D22646967672D7375626D69742D646174652D726573706F6E7365222F3E3C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D22646967672D7375626D69742D73636F7265222F3E3C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D22646967672D7375626D69742D6E756D6265722D766F7465222F3E3C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D22646967672D7375626D69742D6E756D6265722D636F6D6D656E74222F3E3C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D22646967672D7375626D69742D74797065222F3E3C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D22646967672D7375626D69742D63617465676F7279222F3E3C78736C3A746578743E223C2F78736C3A746578743E203C78736C3A746578743E262331303B3C2F78736C3A746578743E0D0A093C2F78736C3A74656D706C6174653E0D0A3C2F78736C3A7374796C6573686565743E);
INSERT INTO `digglike_export_format` (`id_export`, `title`, `description`, `extension`, `xsl_file`) VALUES (3, 'csv commentaires', 'Export les commentaires au format csv', 'csv', 0x3C3F786D6C2076657273696F6E3D22312E302220656E636F64696E673D225554462D38223F3E0D0A3C78736C3A7374796C6573686565742076657273696F6E3D22312E302220786D6C6E733A78736C3D22687474703A2F2F7777772E77332E6F72672F313939392F58534C2F5472616E73666F726D223E0D0A093C78736C3A6F7574707574206D6574686F643D2274657874222F3E0D0A093C78736C3A74656D706C617465206D617463683D222F64696767223E0D0A09093C78736C3A746578743E22636F6D6D656E7461697265223B226461746520647520636F6D6D656E7461697265223B227479706520646520636F6D6D656E7461697265223B2270726F706F736974696F6E20636F6D6D656E7426233233333B65223B22646174652070726F706F736974696F6E223B2273636F7265223B226E6F6D62726520646520766F7465223B6E6F6D62726520646520636F6D6D656E7461697265223B22747970652064652070726F706F736974696F6E223B222263617426233233333B676F726965223C2F78736C3A746578743E0D0A09093C78736C3A746578743E262331303B3C2F78736C3A746578743E0D0A09093C78736C3A6170706C792D74656D706C617465732073656C6563743D2264696767732D7375626D69742F646967672D7375626D6974222F3E0D0A093C2F78736C3A74656D706C6174653E0D0A093C78736C3A74656D706C617465206D617463683D222F646967672F64696767732D7375626D69742F646967672D7375626D6974223E0D0A090D0A093C78736C3A666F722D656163682073656C6563743D2264696767732D7375626D69742D636F6D6D656E74732F646967672D7375626D69742D636F6D6D656E74223E0D0A090D0A090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D22646967672D7375626D69742D636F6D6D656E742D76616C7565222F3E3C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D22646967672D7375626D69742D636F6D6D656E742D64617465222F3E3C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A090909093C78736C3A746578743E22636F6D6D656E74616972652064652070726F706F736974696F6E223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A090909090D0A090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D222E2E2F2E2E2F646967672D7375626D69742D76616C7565222F3E3C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D222E2E2F2E2E2F646967672D7375626D69742D646174652D726573706F6E7365222F3E3C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D222E2E2F2E2E2F646967672D7375626D69742D73636F7265222F3E3C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D222E2E2F2E2E2F646967672D7375626D69742D6E756D6265722D766F7465222F3E3C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D222E2E2F2E2E2F646967672D7375626D69742D6E756D6265722D636F6D6D656E74222F3E3C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D222E2E2F2E2E2F646967672D7375626D69742D74797065222F3E3C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D222E2E2F2E2E2F646967672D7375626D69742D63617465676F7279222F3E3C78736C3A746578743E223C2F78736C3A746578743E203C78736C3A746578743E262331303B3C2F78736C3A746578743E0D0A090909093C78736C3A666F722D656163682073656C6563743D2264696767732D7375626D69742D636F6D6D656E74732F646967672D7375626D69742D636F6D6D656E74223E0D0A09090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D22646967672D7375626D69742D636F6D6D656E742D76616C7565222F3E3C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A09090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D22646967672D7375626D69742D636F6D6D656E742D64617465222F3E3C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A09090909093C78736C3A746578743E22636F6D6D656E746169726520646520636F6D6D656E7461697265223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A09090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D222E2E2F2E2E2F2E2E2F2E2E2F646967672D7375626D69742D76616C7565222F3E3C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A09090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D222E2E2F2E2E2F2E2E2F2E2E2F646967672D7375626D69742D646174652D726573706F6E7365222F3E3C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A09090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D222E2E2F2E2E2F2E2E2F2E2E2F646967672D7375626D69742D73636F7265222F3E3C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A09090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D222E2E2F2E2E2F2E2E2F2E2E2F646967672D7375626D69742D6E756D6265722D766F7465222F3E3C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A09090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D222E2E2F2E2E2F2E2E2F2E2E2F646967672D7375626D69742D6E756D6265722D636F6D6D656E74222F3E3C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A09090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D222E2E2F2E2E2F2E2E2F2E2E2F646967672D7375626D69742D74797065222F3E3C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A09090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D222E2E2F2E2E2F2E2E2F2E2E2F646967672D7375626D69742D63617465676F7279222F3E3C78736C3A746578743E223C2F78736C3A746578743E203C78736C3A746578743E262331303B3C2F78736C3A746578743E0D0A090909093C2F78736C3A666F722D65616368203E0D0A093C2F78736C3A666F722D656163683E0D0A093C2F78736C3A74656D706C6174653E0D0A3C2F78736C3A7374796C6573686565743E);


	
	
	