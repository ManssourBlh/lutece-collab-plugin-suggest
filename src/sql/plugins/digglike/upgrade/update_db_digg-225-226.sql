DROP TABLE IF EXISTS `digglike_action`;
CREATE TABLE IF NOT EXISTS `digglike_action` (
  `id_action` int(11) NOT NULL DEFAULT '0',
  `name_key` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL,
  `description_key` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL,
  `action_url` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `icon_url` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `action_permission` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `digg_state` smallint(6) DEFAULT '0',
  PRIMARY KEY (`id_action`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

INSERT INTO `digglike_action` (`id_action`, `name_key`, `description_key`, `action_url`, `icon_url`, `action_permission`, `digg_state`) VALUES
	(1, 'digglike.action.modify.name', 'digglike.action.modify.description', 'jsp/admin/plugins/digglike/ModifyDigg.jsp', 'icon-edit icon-white', 'MODIFY', 0),
	(2, 'digglike.action.modify.name', 'digglike.action.modify.description', 'jsp/admin/plugins/digglike/ModifyDigg.jsp', 'icon-edit icon-white', 'MODIFY', 1),
	(3, 'digglike.action.manageDiggSubmit.name', 'digglike.action.manageDiggSubmit.description', 'jsp/admin/plugins/digglike/ManageDiggSubmit.jsp', 'icon-inbox icon-white', 'MANAGE_DIGG_SUBMIT', 0),
	(4, 'digglike.action.manageDiggSubmit.name', 'digglike.action.manageDiggSubmit.description', 'jsp/admin/plugins/digglike/ManageDiggSubmit.jsp', 'icon-inbox icon-white', 'MANAGE_DIGG_SUBMIT', 1),
	(5, 'digglike.action.disable.name', 'digglike.action.disable.description', 'jsp/admin/plugins/digglike/ConfirmDisableDigg.jsp', 'icon-remove icon-white', 'CHANGE_STATE', 1),
	(6, 'digglike.action.enable.name', 'digglike.action.enable.description', 'jsp/admin/plugins/digglike/DoEnableDigg.jsp', 'icon-ok icon-white', 'CHANGE_STATE', 0),
	(7, 'digglike.action.copy.name', 'digglike.action.copy.description', 'jsp/admin/plugins/digglike/DoCopyDigg.jsp', 'icon-move icon-white', 'COPY', 0),
	(8, 'digglike.action.copy.name', 'digglike.action.copy.description', 'jsp/admin/plugins/digglike/DoCopyDigg.jsp', 'icon-move icon-white', 'COPY', 1),
	(9, 'digglike.action.delete.name', 'digglike.action.delete.description', 'jsp/admin/plugins/digglike/ConfirmRemoveDigg.jsp', 'icon-trash icon-white', 'DELETE', 0),
	(10, 'digglike.action.updateAllDiggSubmit.name', 'digglike.action.updateAllDiggSubmit.description', 'jsp/admin/plugins/digglike/ConfirmUpdateAllDiggSubmit.jsp', 'icon-cog icon-white', 'UPDATE_ALL_DIGG_SUBMIT', 1),
	(11, 'digglike.action.updateAllDiggSubmit.name', 'digglike.action.updateAllDiggSubmit.description', 'jsp/admin/plugins/digglike/ConfirmUpdateAllDiggSubmit.jsp', 'icon-cog icon-white', 'UPDATE_ALL_DIGG_SUBMIT', 0);

ALTER TABLE digglike_comment_submit ADD COLUMN date_modify timestamp NULL;
UPDATE digglike_comment_submit SET date_modify=date_comment ;
UPDATE digglike_comment_submit p join (select e.id_parent_comment, MAX(e.date_comment) as date_comment  from digglike_comment_submit e group by id_parent_comment)AS tmp  SET p.date_modify = tmp.date_comment where id_comment_submit=tmp.id_parent_comment ;


TRUNCATE digglike_export_format;
INSERT INTO digglike_export_format (`id_export`, `title`, `description`, `extension`, `xsl_file`) VALUES
	(1, 'xml', 'Exporter les propositions au format xml', 'xml',0x3C3F786D6C2076657273696F6E3D22312E302220656E636F64696E673D2249534F2D383835392D31223F3E0D0A3C78736C3A7374796C6573686565742076657273696F6E3D22312E302220786D6C6E733A78736C3D22687474703A2F2F7777772E77332E6F72672F313939392F58534C2F5472616E73666F726D223E0D0A3C78736C3A6F7574707574206D6574686F643D22786D6C222076657273696F6E3D22312E302220656E636F64696E673D2249534F2D383835392D312220696E64656E743D22796573222063646174612D73656374696F6E2D656C656D656E74733D22646967672D7375626D69742D76616C756520646967672D7375626D69742D63617465676F7279222F3E0D0A3C78736C3A74656D706C617465206D617463683D222F223E0D0A203C78736C3A6170706C792D74656D706C617465732073656C6563743D2264696767222F3E200D0A3C2F78736C3A74656D706C6174653E0D0A0D0A3C78736C3A74656D706C617465206D617463683D2264696767223E0D0A090D0A093C646967673E0D0A09093C646967672D7469746C653E0D0A0909093C78736C3A76616C75652D6F662073656C6563743D22646967672D7469746C65222F3E0D0A09093C2F646967672D7469746C653E0D0A09093C7375626D6974733E0D0A0909093C78736C3A6170706C792D74656D706C617465732073656C6563743D2264696767732D7375626D69742F646967672D7375626D6974222F3E200D0A09093C2F7375626D6974733E0D0A093C2F646967673E090D0A3C2F78736C3A74656D706C6174653E0D0A0D0A3C78736C3A74656D706C617465206D617463683D22646967672D7375626D6974223E0D0A093C646967672D7375626D69743E0D0A09093C646967672D7375626D69742D646174652D726573706F6E73653E0D0A0909093C78736C3A76616C75652D6F662073656C6563743D22646967672D7375626D69742D646174652D726573706F6E7365222F3E0D0A09093C2F646967672D7375626D69742D646174652D726573706F6E73653E0D0A09090D0A09093C646967672D7375626D69742D73636F72653E0D0A0909093C78736C3A76616C75652D6F662073656C6563743D22646967672D7375626D69742D73636F7265222F3E0D0A093C2F646967672D7375626D69742D73636F72653E0D0A09090D0A09093C646967672D7375626D69742D6E756D6265722D766F74653E0D0A0909093C78736C3A76616C75652D6F662073656C6563743D22646967672D7375626D69742D6E756D6265722D766F7465222F3E0D0A093C2F646967672D7375626D69742D6E756D6265722D766F74653E0D0A09090D0A09093C646967672D7375626D69742D6E756D6265722D636F6D6D656E743E0D0A0909093C78736C3A76616C75652D6F662073656C6563743D22646967672D7375626D69742D6E756D6265722D636F6D6D656E74222F3E0D0A09093C2F646967672D7375626D69742D6E756D6265722D636F6D6D656E743E0D0A09090D0A093C646967672D7375626D69742D76616C75653E0D0A0909093C78736C3A76616C75652D6F662073656C6563743D22646967672D7375626D69742D76616C7565222F3E0D0A09093C2F646967672D7375626D69742D76616C75653E0D0A09093C646967672D7375626D69742D63617465676F72793E0D0A0909093C78736C3A76616C75652D6F662073656C6563743D22646967672D7375626D69742D63617465676F7279222F3E0D0A09093C2F646967672D7375626D69742D63617465676F72793E0D0A093C2F646967672D7375626D69743E0D0A3C2F78736C3A74656D706C6174653E0D0A3C2F78736C3A7374796C6573686565743E),
	(2, 'csv propositions', 'Exporter les propositions au format csv', 'csv',0x3C3F786D6C2076657273696F6E3D22312E302220656E636F64696E673D225554462D38223F3E0D0A3C78736C3A7374796C6573686565742076657273696F6E3D22312E302220786D6C6E733A78736C3D22687474703A2F2F7777772E77332E6F72672F313939392F58534C2F5472616E73666F726D223E0D0A093C78736C3A6F7574707574206D6574686F643D2274657874222F3E0D0A093C78736C3A74656D706C617465206D617463683D222F64696767223E0D0A09093C78736C3A746578743E2270726F706F736974696F6E223B22646174652070726F706F736974696F6E223B2273636F7265223B226E6F6D62726520646520766F7465223B226E6F6D62726520646520636F6D6D656E7461697265223B2263617426233233333B676F726965223C2F78736C3A746578743E0D0A09093C78736C3A746578743E262331303B3C2F78736C3A746578743E0D0A09093C78736C3A6170706C792D74656D706C617465732073656C6563743D2264696767732D7375626D69742F646967672D7375626D6974222F3E0D0A093C2F78736C3A74656D706C6174653E0D0A093C78736C3A74656D706C617465206D617463683D222F646967672F64696767732D7375626D69742F646967672D7375626D6974223E0D0A090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D22646967672D7375626D69742D76616C7565222F3E3C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D22646967672D7375626D69742D646174652D726573706F6E7365222F3E3C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D22646967672D7375626D69742D73636F7265222F3E3C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D22646967672D7375626D69742D6E756D6265722D766F7465222F3E3C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D22646967672D7375626D69742D6E756D6265722D636F6D6D656E74222F3E3C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D22646967672D7375626D69742D63617465676F7279222F3E3C78736C3A746578743E223C2F78736C3A746578743E203C78736C3A746578743E262331303B3C2F78736C3A746578743E0D0A093C2F78736C3A74656D706C6174653E0D0A3C2F78736C3A7374796C6573686565743E),
	(3, 'csv commentaires', 'Export les commentaires au format csv', 'csv',0x3C3F786D6C2076657273696F6E3D22312E302220656E636F64696E673D225554462D38223F3E0D0A3C78736C3A7374796C6573686565742076657273696F6E3D22312E302220786D6C6E733A78736C3D22687474703A2F2F7777772E77332E6F72672F313939392F58534C2F5472616E73666F726D223E0D0A093C78736C3A6F7574707574206D6574686F643D2274657874222F3E0D0A093C78736C3A74656D706C617465206D617463683D222F64696767223E0D0A09093C78736C3A746578743E22636F6D6D656E7461697265223B226461746520647520636F6D6D656E7461697265223B227479706520646520636F6D6D656E7461697265223B2270726F706F736974696F6E20636F6D6D656E7426233233333B65223B22646174652070726F706F736974696F6E223B2273636F7265223B226E6F6D62726520646520766F7465223B226E6F6D62726520646520636F6D6D656E7461697265223B2263617426233233333B676F726965223C2F78736C3A746578743E0D0A09093C78736C3A746578743E262331303B3C2F78736C3A746578743E0D0A09093C78736C3A6170706C792D74656D706C617465732073656C6563743D2264696767732D7375626D69742F646967672D7375626D6974222F3E0D0A093C2F78736C3A74656D706C6174653E0D0A093C78736C3A74656D706C617465206D617463683D222F646967672F64696767732D7375626D69742F646967672D7375626D6974223E0D0A090D0A093C78736C3A666F722D656163682073656C6563743D2264696767732D7375626D69742D636F6D6D656E74732F646967672D7375626D69742D636F6D6D656E74223E0D0A090D0A090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D22646967672D7375626D69742D636F6D6D656E742D76616C7565222F3E3C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D22646967672D7375626D69742D636F6D6D656E742D64617465222F3E3C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A090909093C78736C3A746578743E22636F6D6D656E74616972652064652070726F706F736974696F6E223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A090909090D0A090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D222E2E2F2E2E2F646967672D7375626D69742D76616C7565222F3E3C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D222E2E2F2E2E2F646967672D7375626D69742D646174652D726573706F6E7365222F3E3C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D222E2E2F2E2E2F646967672D7375626D69742D73636F7265222F3E3C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D222E2E2F2E2E2F646967672D7375626D69742D6E756D6265722D766F7465222F3E3C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D222E2E2F2E2E2F646967672D7375626D69742D6E756D6265722D636F6D6D656E74222F3E3C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D222E2E2F2E2E2F646967672D7375626D69742D63617465676F7279222F3E3C78736C3A746578743E223C2F78736C3A746578743E203C78736C3A746578743E262331303B3C2F78736C3A746578743E0D0A090909093C78736C3A666F722D656163682073656C6563743D2264696767732D7375626D69742D636F6D6D656E74732F646967672D7375626D69742D636F6D6D656E74223E0D0A09090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D22646967672D7375626D69742D636F6D6D656E742D76616C7565222F3E3C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A09090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D22646967672D7375626D69742D636F6D6D656E742D64617465222F3E3C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A09090909093C78736C3A746578743E22636F6D6D656E746169726520646520636F6D6D656E7461697265223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A09090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D222E2E2F2E2E2F2E2E2F2E2E2F646967672D7375626D69742D76616C7565222F3E3C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A09090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D222E2E2F2E2E2F2E2E2F2E2E2F646967672D7375626D69742D646174652D726573706F6E7365222F3E3C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A09090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D222E2E2F2E2E2F2E2E2F2E2E2F646967672D7375626D69742D73636F7265222F3E3C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A09090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D222E2E2F2E2E2F2E2E2F2E2E2F646967672D7375626D69742D6E756D6265722D766F7465222F3E3C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A09090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D222E2E2F2E2E2F2E2E2F2E2E2F646967672D7375626D69742D6E756D6265722D636F6D6D656E74222F3E3C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A746578743E3B3C2F78736C3A746578743E0D0A09090909093C78736C3A746578743E223C2F78736C3A746578743E3C78736C3A76616C75652D6F662073656C6563743D222E2E2F2E2E2F2E2E2F2E2E2F646967672D7375626D69742D63617465676F7279222F3E3C78736C3A746578743E223C2F78736C3A746578743E203C78736C3A746578743E262331303B3C2F78736C3A746578743E0D0A090909093C2F78736C3A666F722D65616368203E0D0A093C2F78736C3A666F722D656163683E0D0A093C2F78736C3A74656D706C6174653E0D0A3C2F78736C3A7374796C6573686565743E);
